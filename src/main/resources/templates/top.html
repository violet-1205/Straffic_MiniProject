<nav class="modern-navbar" th:fragment="menu" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
    <div class="navbar-container">
        <ul class="nav-links">
            <li class="nav-item">
                <a th:href="@{/}" class="nav-link">
                    <span class="material-symbols-outlined">home</span> M-MaaS
                </a>
            </li>
        </ul>

        <ul class="nav-right">
            <!-- Anonymous -->
            <li sec:authorize="isAnonymous()">
                <a href="/memberInput" class="nav-link">
                    <span class="material-symbols-outlined">person_add</span> 회원가입
                </a>
            </li>
            <li sec:authorize="isAnonymous()">
                <a href="/login" class="nav-link">
                    <span class="material-symbols-outlined">login</span> 로그인
                </a>
            </li>

            <!-- Authenticated -->
            <li sec:authorize="isAuthenticated()">
                <a href="/mypage" class="nav-link">
                    <img th:src="@{/member/profile-image}"
                         alt="프로필"
                         style="width:28px; height:28px; border-radius:50%; object-fit:cover; display:block; margin-right:8px;"
                         onerror="this.style.display='none'">
                    <span th:if="${#authentication.principal instanceof T(com.example.straffic.oauth.PrincipalOauth2UserService.CustomOAuth2User)}"
                          th:text="${#authentication.principal.realName} + '님'">User님</span>
                    <span th:unless="${#authentication.principal instanceof T(com.example.straffic.oauth.PrincipalOauth2UserService.CustomOAuth2User)}"
                          th:text="${#authentication.name} + '님'">User님</span>
                </a>
            </li>
            <li sec:authorize="isAuthenticated()">
                <a href="/logout" class="nav-link">
                    <span class="material-symbols-outlined">logout</span> 로그아웃
                </a>
            </li>
        </ul>
    </div>
</nav>
